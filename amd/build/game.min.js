define(["mod_tictactoe/ui","mod_tictactoe/state"],function(a,b){var c=function(c){this.ai=c,this.currentState=new b,this.currentState.board=["E","E","E","E","E","E","E","E","E"],this.currentState.turn="X",this.status="beginning",this.advanceTo=function(b){this.currentState=b,b.isTerminal()?(this.status="ended","X-won"===b.result?a.switchViewTo("won"):"O-won"===b.result?a.switchViewTo("lost"):a.switchViewTo("draw")):"X"===this.currentState.turn?a.switchViewTo("human"):(a.switchViewTo("ai"),this.ai.notify("O"))},this.start=function(){"beginning"===this.status&&(this.advanceTo(this.currentState),this.status="running")}};return c.score=function(a){return"X-won"===a.result?10-a.oMovesCount:"O-won"===a.result?-10+a.oMovesCount:0},c});