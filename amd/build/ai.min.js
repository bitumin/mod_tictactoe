define(["mod_tictactoe/game","mod_tictactoe/ui","mod_tictactoe/aiaction"],function(a,b,c){var d=function(d){function e(b){if(b.isTerminal())return a.score(b);var d;d="X"===b.turn?-1e3:1e3;var f=b.emptyCells(),g=f.map(function(a){var d=new c(a);return d.applyTo(b)});return g.forEach(function(a){var c=e(a);"X"===b.turn?c>d&&(d=c):c<d&&(d=c)}),d}function f(a){var d=j.currentState.emptyCells(),e=d[Math.floor(Math.random()*d.length)],f=new c(e),g=f.applyTo(j.currentState);b.insertAt(e,a),j.advanceTo(g)}function g(a){var d=j.currentState.emptyCells(),f=d.map(function(a){var b=new c(a),d=b.applyTo(j.currentState);return b.minimaxVal=e(d),b});"X"===a?f.sort(c.DESCENDING):f.sort(c.ASCENDING);var g;g=100*Math.random()<=40?f[0]:f.length>=2?f[1]:f[0];var h=g.applyTo(j.currentState);b.insertAt(g.movePosition,a),j.advanceTo(h)}function h(a){var d=j.currentState.emptyCells(),f=d.map(function(a){var b=new c(a),d=b.applyTo(j.currentState);return b.minimaxVal=e(d),b});"X"===a?f.sort(c.DESCENDING):f.sort(c.ASCENDING);var g=f[0],h=g.applyTo(j.currentState);b.insertAt(g.movePosition,a),j.advanceTo(h)}var i=d,j={};this.plays=function(a){j=a},this.notify=function(a){switch(i){case"blind":f(a);break;case"novice":g(a);break;case"master":h(a)}}};return d});